webpackJsonp([1],{0:function(t,e){},"5oe+":function(t,e){},AEnE:function(t,e){},IpNo:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("IvJb"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=s("C7Lr")({},n,!1,function(t){s("5oe+")},null,null).exports,o=s("zO6J"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("el-container",[a("el-header",[a("p",[t._v("登 录")])]),t._v(" "),a("el-main",[a("el-card",{staticClass:"box-card"},[a("img",{staticClass:"icon_head",attrs:{src:s("hmxT"),alt:""}}),t._v(" "),a("el-form",{attrs:{"label-position":"left",center:"true"}},[a("el-form-item",{attrs:{label:"名称","label-width":"40px"}},[a("el-input",{attrs:{placeholder:"请输入您的名称",size:"medium"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("el-form-item"),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",round:""},on:{click:t.loginChat}},[t._v("登录")])],1)],1)],1)],1),t._v(" "),a("el-footer")],1)],1)},staticRenderFns:[]};var c=s("C7Lr")({props:["jump"],data:function(){return{userName:""}},methods:{loginChat:function(){var t=this.userName;if(t){var e=this.$route.params.tableNo;e?this.$router.push("/chatMain/"+e+"/"+t):this.$message({message:"桌号不能为空",type:"error",center:!0})}else this.$message({message:"用户名称不能为空",type:"error",center:!0})}}},i,!1,function(t){s("eNG2")},"data-v-d3dbca1e",null).exports,u=s("3cXf"),l=s.n(u),d=s("4YfN"),h=s.n(d),m=s("9rMa"),p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("img",{staticClass:"userIcon",attrs:{src:this.item.iconUrl,alt:""}}),this._v(" "),e("p",[this._v(this._s(this.item.userName))])])},staticRenderFns:[]};var f=s("C7Lr")({props:["item","index"]},p,!1,function(t){s("xxTZ")},"data-v-0d94d68c",null).exports,v={computed:h()({},Object(m.b)(["userInfos"])),components:{UserInfo:f}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"user-list"},t._l(t.userInfos,function(e,a){return a<=3?s("UserInfo",{attrs:{item:e,index:a}}):t._e()}))},staticRenderFns:[]};var _=s("C7Lr")(v,g,!1,function(t){s("XAYC")},"data-v-610faf91",null).exports,b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-info"},[s("el-row",{attrs:{gutter:2}},[s("el-col",{attrs:{span:24}},[s("span",{staticClass:"time"},[t._v("2018年7月30日 17:42:32 ")])])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[s("img",{staticClass:"user-icon",attrs:{src:t.item.iconUrl,alt:""}})]),t._v(" "),s("el-col",{attrs:{span:17}},[s("el-card",{attrs:{shadow:"always"}},[s("p",{staticClass:"user-name-text"},[t._v(t._s(t.item.userName)+":")]),t._v(" "),s("p",[t._v(t._s(t.item.chatMessange))])])],1)],1)],1)},staticRenderFns:[]};var C={components:{ChatInfo:s("C7Lr")({props:["item","index"]},b,!1,function(t){s("AEnE")},"data-v-6097d273",null).exports},computed:h()({},Object(m.b)(["chatList"]))},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chatBox"},this._l(this.chatList,function(t,s){return e("ChatInfo",{attrs:{item:t,index:s}})}))},staticRenderFns:[]};var w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-footer"},[s("el-form",{attrs:{inline:!0,size:"medium"}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"请输入信息"},model:{value:t.userInput,callback:function(e){t.userInput=e},expression:"userInput"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("发送")])],1)],1)],1)},staticRenderFns:[]};var I={data:function(){return{showLoading:!1,websocket:null}},components:{UserList:_,ChatBox:s("C7Lr")(C,N,!1,function(t){s("U5vw")},"data-v-7ec47c81",null).exports,ChatMainFoot:s("C7Lr")({props:["sendGroupMsg"],data:function(){return{userInput:""}},methods:{onSubmit:function(){this.userInput?(this.sendGroupMsg(this.userInput),this.userInput=""):this.$message.error("聊天内容不能为空")}}},w,!1,function(t){s("OCvD")},"data-v-59d9b59b",null).exports},methods:{websocketClose:function(){this.websocket.close()},onmessage:function(t){console.log(t.data);var e=JSON.parse(t.data);switch(e.dataType){case"SUCESS_MSG":this.$message.success(e.showMessage);break;case"USER_LIST":this.$store.dispatch("updateUserInfos",JSON.parse(e.data));break;case"ON_LINE_NOTICE":this.$message(e.data);break;case"GROUP_MSG":console.log("您收到一条组群消息:"+e.data.chatMessange),this.$store.dispatch("addChatBox",e.data)}},sendGroupMsg:function(t){console.log("用户输入的信息是:"+t);var e={userName:this.$route.params.userName,tableNo:this.$route.params.tableNo,msgType:"GROUP_MSG",messange:t};this.websocket.send(l()(e))}},mounted:function(){var t=this;if(!1 in window)return this.$router.back(),void this.$message.error("您的浏览器不支持！");var e=this.$route.params.userName,s=this.$route.params.tableNo;this.showLoading=!0;var a="ws://47.96.131.53:8080/websocket/"+e+"/"+s;this.websocket=new WebSocket(a),this.websocket.onopen=function(){t.showLoading=!1},this.websocket.onerror=function(){t.$message.error("服务器连接发生错误"),setTimeout(function(){t.$router.back()},1e3)},this.websocket.onmessage=function(e){t.onmessage(e)}},destroyed:function(){this.websocketClose()}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.showLoading,expression:"showLoading"}],attrs:{id:"chatMain"}},[e("div",{staticClass:"chat-header"},[this._m(0),this._v(" "),e("UserList")],1),this._v(" "),e("ChatBox"),this._v(" "),e("ChatMainFoot",{attrs:{sendGroupMsg:this.sendGroupMsg}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"title"}},[e("p",[this._v("聊 天")])])}]};var $=s("C7Lr")(I,x,!1,function(t){s("IpNo")},"data-v-3a2c00ae",null).exports;a.default.use(o.a);var U,k=new o.a({routes:[{path:"/",name:"主页",component:r,children:[{path:"/",redirect:"/login/01"},{path:"/login/:tableNo",name:"登录",component:c}]},{path:"/chatMain/:tableNo/:userName",component:$}]}),L=s("H93t"),M=s.n(L),E=(s("TsY+"),s("OolZ")),y={updateUserInfos:function(t,e){(0,t.commit)("updateUserInfos",{userInfos:e})},addChatBox:function(t,e){(0,t.commit)("addChatBox",{chatMsg:e})}},S=s("a3Yh"),O=s.n(S),G=(U={},O()(U,"updateUserInfos",function(t,e){var s=e.userInfos;t.userInfos=[],t.userInfos=s}),O()(U,"addChatBox",function(t,e){var s=e.chatMsg;t.chatList.push(s)}),U),T=s("UjVw"),R=s.n(T);a.default.use(m.a);var F=new m.a.Store({state:{userInfos:[{userName:"美队",tableNo:"01",iconUrl:"./static/headIcon/captain-america.png"},{userName:"忍者",tableNo:"01",iconUrl:"./static/headIcon/ninja.png"},{userName:"小黄人",tableNo:"01",iconUrl:"./static/headIcon/minion.png"},{userName:"小鸟",tableNo:"01",iconUrl:"./static/headIcon/angry-birds.png"}],chatList:[{time:"2018年7月30日 17:42:32",iconUrl:"./static/headIcon/angry-birds.png",userName:"管理员",chatMessange:"欢迎进入本聊天室"}]},mutations:G,actions:y,getters:R.a});a.default.use(E.a),a.default.config.productionTip=!1,a.default.use(M.a),new a.default({el:"#app",router:k,components:{App:r},template:"<App/>",store:F})},OCvD:function(t,e){},"TsY+":function(t,e){},U5vw:function(t,e){},UjVw:function(t,e){},XAYC:function(t,e){},eNG2:function(t,e){},hmxT:function(t,e,s){t.exports=s.p+"static/img/angry-birds.8995c41.png"},xxTZ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7ab16552a8b06845bae4.js.map